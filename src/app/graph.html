<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Graph</title>
    <link rel="stylesheet" type="text/css" href="../extjs-4.1.0/resources/css/ext-all.css"/>
    <script type="text/javascript" src="../extjs-4.1.0/ext-all-debug.js"></script>

    <script type="text/javascript" src="javascripts/models/GraphBarData.js"></script>
    <script type="text/javascript" src="javascripts/models/GraphPointData.js"></script>

    <script type="text/javascript" src="javascripts/stores/GraphBarData.js"></script>
    <script type="text/javascript" src="javascripts/stores/GraphPointDataStore.js"></script>

    <script type="text/javascript" src="javascripts/views/graph/GraphSwitcher.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/GraphSwitcherButton.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/GraphFilterButton.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/GraphOverlayButton.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/GraphAnnualSeries.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/GraphToolbar.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/GraphAbstractChart.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/GraphBarDataChart.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/GraphPointDataChart.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/_GraphTheme.js"></script>
    <script type="text/javascript" src="javascripts/views/graph/GraphView.js"></script>

    <style type="text/css">
        @import url("../prototype/main.css");
        @import url("stylesheets/graph.css");
    </style>
    <script type="text/javascript">
        Ext.ns("C3.data");

        // Generate Annual Data

        C3.data.annual = new Ext.data.JsonStore({
            fields: ["name", "data"],
            data: [
                {name: "Previous Year", data: 10},
                {name: "Current Year", data: 20},
                {name: "Efficient", data: 10},
                {name: "Average", data: 50}
            ]
        });

        // Generate Monthly Data

        C3.data.get3Randoms = function(min, max) {
            if(!min) min = 0;
            if(!max) max = 100;
            var result = [];
            result.push(Math.floor(Math.random() * (max-min)));
            result.push(Math.floor(Math.random() * result[0]));
            result.push(result[0] - result[1]);
            result[0] += min;
            result[1] += min;
            result[2] += min;
            return result;
        };

        C3.data.createDataPoints = function(num) {
            var result = [];
            for(var i = 0; i < num; i++) {

                var spending = C3.data.get3Randoms(30, 90).sort(function(a,b){return b-a}),
                        previous = C3.data.get3Randoms(50, 100).sort(function(a,b){return b-a}),
                        usage = C3.data.get3Randoms(),
                        weather = C3.data.get3Randoms(40,70).sort();

                result.push({
                    key : i,
                    startDate : "5/7/12", endDate : "6/7/12",
                    spendingTotal : spending[0], spendingElectricity : spending[1], spendingGas : spending[2],
                    previousTotal : previous[0], previousElectricity : previous[1], previousGas : previous[2],
                    electricityUsage : usage[0], gasUsage : usage[1], co2usage : usage[2],
                    weatherLow : weather[0], weatherAverage : weather[1], weatherHigh : weather[2]
                });
            }
            return result;
        };

        C3.data.monthly = C3.data.createDataPoints(12);
        C3.data.daily = C3.data.createDataPoints(30);

        Ext.onReady(function () {
            new C3.ui.graph.View({
                dailyRawData : C3.data.daily,
                monthlyRawData : C3.data.monthly,
                renderTo : "chart"
            });
        });
    </script>
</head>
<body>

<div id="header">
    <div id="title"></div>
    <div id="nav"></div>
</div>
<div id="content">
    <div id="chart"></div>
    <div id="plan"></div>
</div>


</body>
</html>